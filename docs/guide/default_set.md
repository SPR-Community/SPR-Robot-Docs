# ⚙️ 初始化配置

::: tip 前情提要
在上一节结束以后，我们**成功启动了框架**，本节我们将会提到框架的**初始化配置逻辑**以及**配置文件结构**
:::

## 初始化配置
在框架启动后，我们会发现控制台输出了这样的内容：
``` bash
F:\SPR-Robot>py main.py
[2024-07-01 20:40:58][WARNING] 框架 >>> 检测到根目录无配置文件，将进入引导模式...
◈ 请输入您的正向WebSocket连接地址 >>> 
```
此时，请输入以`ws://`为开头的**正向Websocket**地址，确认无误后按下回车

然后，控制台会在5秒后自动重启并尝试连接到以OneBot实现为标准的Websocket服务器
``` bash
[2024-07-01 20:44:15][INFO] 框架 >>> 配置文件已保存，将在5秒后自动启动框架
[2024-07-01 20:44:20][INFO] 框架 >>> 框架已启动 当前框架版本：SPR-Robot:3.0.0 beta-1
[2024-07-01 20:44:20][INFO] 插件管理器 >>> 开始加载插件......
[2024-07-01 20:44:20][INFO] 插件管理器 >>> 成功加载插件：关于插件
[2024-07-01 20:44:20][INFO] 插件管理器 >>> 成功加载插件：广告拦截
[2024-07-01 20:44:20][WARNING] 绑定插件 >>> 数据库不存在，正在尝试初始化新数据库
[2024-07-01 20:44:20][INFO] 绑定插件 >>> 数据库初始化成功！
[2024-07-01 20:44:20][INFO] 插件管理器 >>> 成功加载插件：绑定插件
[2024-07-01 20:44:20][INFO] MOTD >> 正在检查文件是否完整...
[2024-07-01 20:44:20][WARNING] MOTD >> 未检测到/data/motd文件夹，正在创建...
[2024-07-01 20:44:20][WARNING] MOTD >> 未检测到字体文件，正在尝试拉取字体文件（https://spr-community.github.io/SPR-Robot-SRC/motd/font/unifont.ttf）
[2024-07-01 20:44:34][INFO] MOTD >> 正在检测API是否正常(1/1)...
[2024-07-01 20:44:36][INFO] MOTD >> 查询API正常，状态设置为True，MOTD插件已经准备就绪！
[2024-07-01 20:44:36][INFO] MOTD >> 文件检查完毕
[2024-07-01 20:44:36][INFO] 插件管理器 >>> 成功加载插件：Motd插件
[2024-07-01 20:44:36][INFO] 插件管理器 >>> 成功加载插件：帮助菜单
[2024-07-01 20:44:36][INFO] 插件管理器 >>> 成功加载插件：通知插件
[2024-07-01 20:44:36][INFO] 插件管理器 >>> 成功加载插件：Ping插件
[2024-07-01 20:44:36][INFO] 插件管理器 >>> 成功加载插件：信息推送插件
[2024-07-01 20:44:36][INFO] 插件管理器 >>> 加载完毕
[2024-07-01 20:44:36][INFO] 框架 >>> 12345678 已连接
[2024-07-01 20:44:36][INFO] 框架 >>> 欢迎您，测试用户！
```
接下来，您可以设置Websocket服务器进行通信

## 配置文件详解
在上述流程后，我们发现在项目根目录生成了文件`config.yml`，让我们打开查看一下

``` yaml config.yml
# Powered by SPR-Community , Please follow the rules and readme file inside the Repository.
# 版本信息 请勿更改（用于未来可能实现的自动更新）（划掉）
version: 3.0.0 beta-1
# 更新时间（用于菜单显示）
time: 2024.07.02

# 日志输出等级，可选值: INFO, DEBUG。值错误或此值为空则默认INFO
log-level: INFO
# 日志保存位置，值错误或此值为空则默认./logs，请注意相对/绝对路径，不要在日志文件夹结尾添加/
log-save: ./logs

# WS连接地址 仅支持正向 websocket 连接地址
ws-url: ws://127.0.0.1:3001
# 连接失败重试次数。设置为0则禁止重试，值错误或此值为空则默认5
ws-retry: 5

# 插件文件夹位置
plugins-dir: ./plugins

# 调试开关（开发人员选项）
# 不建议个人用户打开，该功能打开后会默认输出消息的发包结构，请将log-level设定为DEBUG以获取详细收发包
# 大小写敏感，可选值：True,False。值错误或此值为空则默认False
debug: False

# -------以下是自定义配置的留空区，禁止删除-------
```

---
接下来，让我们来详细了解一下配置文件的内容

- **version** `str`

通常情况下来说不要动，未来可能会通过服务器获取而非本地获取

- **time** `str`

这个时间搭配插件"帮助菜单"中的版本号展示

- **log-level** `str`

顾名思义，控制台以及/logs文件夹中的日志输出等级

可选值：INFO/DEBUG

- **log-save** `str`

一样，指日志文件的存放点

- **ws-url** `str`

这里指正向WS连接地址（与 [初始化配置](default_set#初始化配置) 中填入的内容一致）

- **ws-retry** `int`

这里指当无法连接时，最多尝试多少次才停止连接并退出框架（设置为0可以禁用此功能）

- **plugins-dir** `str`

这里指**插件**的存放点，详见下文

- **debug** `bool`

这里指调试模式，通常与`log-level: 'DEBUG'`一同使用

可选值：True/False


---
**下一节，我们将要提到事件处理逻辑**